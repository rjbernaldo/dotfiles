define("init",["models/messaging/chrome_app","models/messaging/status_client"],function(n,t){var e,r,s;return e=function(){return r.getStatus(function(n){return n===t.STATUS_OPEN?r.focus():n===t.STATUS_CLOSED?r.launch():n===t.STATUS_UNINSTALLED?chrome.browserAction.setPopup({popup:"popup.html"}):console.warn("Unknown status: "+n)})},s=function(){return chrome.browserAction.setPopup({popup:""}),chrome.browserAction.onClicked.hasListeners()?void 0:chrome.browserAction.onClicked.addListener(e)},r=new n({onInstalled:s}),r.getStatus(function(n){return n===t.STATUS_UNINSTALLED?chrome.browserAction.setPopup({popup:"popup.html"}):s()})}),define("models/constants",[],function(){var n;return n=function(){function n(){}return n.DEBUG="undefined"!=typeof window&&null!==window&&null!=window.chrome&&null!=chrome.runtime&&null!=chrome.runtime.getManifest?chrome.runtime.getManifest().dflag:!0,n}()}),define("models/messaging/chrome_app",["models/messaging/message_server","models/messaging/tab_server","models/messaging/install_server","models/messaging/message_client","models/messaging/status_client","models/constants"],function(n,t,e,r,s,i){var o;return o=function(){function o(i){null==i&&(i={}),this.server=new n,this.server.start(),this.tabServer=new t,this.installServer=new e({onInstalledCallback:i.onInstalled}),this.server.addServer(this.tabServer),this.server.addServer(this.installServer),this.client=new r({serverId:o.CHROME_APP_ID}),this.statusClient=new s({client:this.client})}return o.CHROME_APP_ID=i.DEBUG?"femmpfpnhlmldnfipmgjnknbhlnihljj":"gaedmjdfmmahhbjefcbgaolhhanlaolb",o.prototype.getStatus=function(n){return this.statusClient.getStatus(n)},o.prototype.focus=function(n){return null==n&&(n=function(){}),this.statusClient.focus(n)},o.prototype.launch=function(n){return null==n&&(n=function(){}),chrome.management.launchApp(o.CHROME_APP_ID,n)},o}()});var __bind=function(n,t){return function(){return n.apply(t,arguments)}};define("models/messaging/install_server",["models/tabs/tab_manager"],function(){var n;return n=function(){function n(n){null==n&&(n={}),this.onInstalled=__bind(this.onInstalled,this),this.onInstalledCallback=n.onInstalledCallback}return n.prototype.onInstalled=function(){return this.onInstalledCallback(),!0},n}()}),define("models/messaging/message_client",[],function(){var n;return n=function(){function n(n){this.sendMessage=n.sendMessage||chrome.runtime.sendMessage,this.serverId=n.serverId}return n.prototype.send=function(n,t,e){return this.sendMessage(this.serverId,{action:n,params:t},e)},n}()});var __bind=function(n,t){return function(){return n.apply(t,arguments)}};define("models/messaging/message_server",[],function(){var n;return n=function(){function n(n){null==n&&(n={}),this.listener=__bind(this.listener,this),this.onMessageExternal=n.onMessageExternal||chrome.runtime.onMessageExternal,this.servers=[]}return n.prototype.listener=function(n,t,e){var r,s,i,o,u,a;if(this.isSenderValid(t))for(r=n.action,s=[n.params,e],a=this.servers,o=0,u=a.length;u>o;o++)i=a[o],r in i?i[r].apply(i,s):console.warn("The method "+r+" for "+i.constructor.name+" does not exist");return!0},n.prototype.start=function(){return this.onMessageExternal.addListener(this.listener)},n.prototype.isSenderValid=function(){return!0},n.prototype.addServer=function(n){return this.servers.push(n)},n}()});var __bind=function(n,t){return function(){return n.apply(t,arguments)}};define("models/messaging/status_client",[],function(){var n;return n=function(){function n(t){this.isInstalled=__bind(this.isInstalled,this),this.checkInstalled=__bind(this.checkInstalled,this),this.getStatus=__bind(this.getStatus,this),this.timeout=t.timeout||n.DEFAULT_TIMEOUT,this.client=t.client}return n.DEFAULT_TIMEOUT=1500,n.STATUS_OPEN="open",n.STATUS_CLOSED="closed",n.STATUS_UNINSTALLED="uninstalled",n.prototype.getStatus=function(t){var e,r;return r=this,e=!1,setTimeout(function(){return e||r.checkInstalled(t),e=!0},this.timeout),this.client.send("getStatus",{},function(s){return e||(null!=s&&s.status===!0?t(n.STATUS_OPEN):r.checkInstalled(t)),e=!0})},n.prototype.checkInstalled=function(t){return this.isInstalled(function(e){return t(e?n.STATUS_CLOSED:n.STATUS_UNINSTALLED)})},n.prototype.isInstalled=function(n){return chrome.management.get(this.client.serverId,function(t){return n(null!=t)})},n.prototype.focus=function(n){return this.client.send("focus",{},n)},n}()}),define("models/messaging/tab_server",["models/tabs/tab_manager"],function(n){var t;return t=function(){function t(t){null==t&&(t={}),this.tabManager=t.tabManager||new n}return t.prototype.getTabs=function(n,t){return this.tabManager.getUrls(function(n){return t({tabs:n})}),!0},t}()});var __bind=function(n,t){return function(){return n.apply(t,arguments)}};define("models/tabs/tab_manager",[],function(){var n;return n=function(){function n(t){null==t&&(t={}),this.getUrls=__bind(this.getUrls,this),this.tabManagerQuery=t.tabManagerQuery||n.query}return n.prototype.getUrls=function(n,t){var e;return null==t&&(t={}),e=[],this.tabManagerQuery(t,function(t){var r,s,i;for(s=0,i=t.length;i>s;s++)r=t[s],null!=r.url&&e.push(r.url);return n(e)})},n.prototype.getUniqueUrls=function(n){var t,e;return e=this,t={},this.getUrls(function(e){var r,s,i;for(s=0,i=e.length;i>s;s++)r=e[s],r.indexOf(".")>-1&&(t[r]=!0);return n(Object.keys(t))})},n.query=function(n,t){return chrome.tabs.query(n,t)},n}()}),define("models/tabs/url_parser",[],function(){var n;return n=function(){function n(){}return n.parse=function(n){var t;return t=new URL(n)},n.getHostName=function(t){var e;return e=n.parse(t),e.host},n}()});