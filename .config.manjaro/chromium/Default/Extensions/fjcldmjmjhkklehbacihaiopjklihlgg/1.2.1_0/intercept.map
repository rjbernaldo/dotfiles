{"version":3,"sources":["lib/is-enabled.ts","lib/disable-infinite-scroll.ts","intercept.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBAGc;AAFd,IAAM,QAAQ,CAAE,EAAF,EAAM,GAAN,CAAd;AAEc,SAAA,SAAA,GAAA;AACb,WAAO,MAAM,OAAN,CAAe,OAAO,QAAP,CAAgB,QAA/B,IAA4C,CAAC,CAApD;AACA;;;;;;;;kBCiCa,YAAA;AACb,WAAO,gBAAP,CAAwB,QAAxB,EAAkC,UAAlC,EAA8C,IAA9C;AACA,WAAO,gBAAP,CAAwB,YAAxB,EAAsC,UAAtC,EAAkD,IAAlD;AACA;;AApCD;;;;;;AAEA;AACA,IAAI,iBAAiB,SAAjB,cAAiB,CAAE,MAAF,EAAa;AACjC,QAAK,CAAE,MAAF,IAAY,CAAE,OAAO,OAA1B,EAAoC;AACnC,eAAO,KAAP;AACA;AAED,QAAK,OAAO,OAAP,CAAgB,eAAhB,KAAqC,OAAO,OAAP,CAAgB,kBAAhB,CAA1C,EAAiF;AAChF,eAAO,IAAP;AACA;AAED,QAAK,CAAE,OAAO,UAAd,EAA2B;AAC1B,eAAO,KAAP;AACA;AAED,WAAO,eAAgB,OAAO,aAAvB,CAAP;AACA,CAdD,EARA;;;;;AAwBA,IAAM,aAAa,SAAb,UAAa,CAAE,KAAF,EAA6B;AAC/C,QAAK,CAAE,0BAAP,EAAqB;AACpB,eAAO,KAAP;AACA;AAED;AACA,QAAK,eAAgB,MAAM,MAAtB,CAAL,EAAsC;AACrC,eAAO,KAAP;AACA;AAED,UAAM,wBAAN;AACA,WAAO,IAAP;AACA,CAZD;;;;AClBA;;;;;;AAEA,wCAPA","file":"intercept.map","sourceRoot":"../src","sourcesContent":["\nconst paths = [ '', '/' ];\n\nexport default function isEnabled() {\n\treturn paths.indexOf( window.location.pathname ) > -1;\n}\n","/**\n * Intercept the scroll event and kill it to prevent the\n * infinite scroll algorithm triggering.\n */\n\nimport isEnabled from './is-enabled';\n\n// Check if the event target is a chat conversation\nlet isConversation = ( target ) => {\n\tif ( ! target || ! target.matches ) {\n\t\treturn false;\n\t}\n\n\tif ( target.matches( '.conversation' ) || target.matches( '#ChatTabsPagelet' ) ) {\n\t\treturn true;\n\t}\n\n\tif ( ! target.parentNode ) {\n\t\treturn false;\n\t}\n\n\treturn isConversation( target.parentElement );\n}\n\t\nconst maybeBlock = ( event: MouseWheelEvent ) => {\n\tif ( ! isEnabled() ) {\n\t\treturn false;\n\t}\n\n\t// Allow infinite scrolling of chats on the home page\n\tif ( isConversation( event.target ) ) {\n\t\treturn false;\n\t}\n\n\tevent.stopImmediatePropagation();\n\treturn true;\n}\n\nexport default function() {\n\twindow.addEventListener('scroll', maybeBlock, true);\n\twindow.addEventListener('mousewheel', maybeBlock, true);\n}\n","\n/**\n * This script should run at document start to set up\n * intercepts before FB loads.\n */\n\nimport disableInfiniteScroll from './lib/disable-infinite-scroll';\n\ndisableInfiniteScroll();\n"]}